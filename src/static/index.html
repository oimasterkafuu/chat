<!--
Chat - A simple chat application.
Copyright (C) 2024 oimaster

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <https://www.gnu.org/licenses/>.

Contact Information:
Email: oimasterfake@icloud.com

Project URL: https://github.com/oimasterkafuu/chat
-->

<script src="js/sha256.js"></script>
<script src="js/aes.js"></script>
<script src="js/rsa.js"></script>

<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io();

    socket.on('connect', async () => {
        console.log('已连接');

        socket.on('msg', async (data) => {
            console.log(await decryptText('oimasterkafuu', data));
        });

        socket.emit('msg', await encryptText('oimasterkafuu', '你好！'));
    });
</script>

<script>
    (async () => {
        const password = 'myPassword';
        const inputText = '你好，世界！';

        const encrypted = await encryptText(password, inputText);
        const decrypted = await decryptText(password, encrypted);

        console.log(encrypted, decrypted);


        // 生成一个密钥对
        const { privateKey, publicKey } = await window.generateRSAKeyPair();


        // 加密输入文本
        const encryptedText = await window.encryptRSA(publicKey, inputText);

        // 解密加密后的文本
        const decryptedText = await window.decryptRSA(privateKey, encryptedText);

        console.log(privateKey, publicKey, encryptedText, decryptedText);
    })();
</script>
